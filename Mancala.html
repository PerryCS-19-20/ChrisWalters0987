<!DOCTYPE HTML>
<HTML>
	<Head>
		<Title>Mancala!</Title>
		<link rel="stylesheet" type="text/css" href="Menu/menu.css">
		<link rel="shortcut icon" type="image/png" href="favicon.png">
		<link rel="stylesheet" type="text/css" href="WebsiteCSS.css">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<Style>
			table, td, th { border: solid 1px; width: 400px; height: 100px}
			td { text-align: center; }
		</Style>
		<script src="SiteMap/sitemap.js"></script>
		<Script>
			var PlayersTurn = "";
			
			var TopArray = ["IDNumber7", "IDNumber6", "IDNumber5", "IDNumber4", "IDNumber3", "IDNumber2", "IDNumber1", "IDNumber10", "IDNumber11", "IDNumber12", "IDNumber13", "IDNumber14", "IDNumber15"];
			var BottomArray = ["IDNumber10", "IDNumber11", "IDNumber12", "IDNumber13","IDNumber14", "IDNumber15", "IDNumber8", "IDNumber7", "IDNumber6", "IDNumber5", "IDNumber4", "IDNumber3", "IDNumber2",];
			
			function RandomPersonFirst()
			{
				var GrabH2 = document.getElementById("WhosTurn");
				var PlayerTopIsFirst = Math.round(Math.random());
				if(PlayerTopIsFirst == 1)
				{
					PlayersTurn = "Top";
					GrabH2.InnerHTML = "Top Player Goes First";
				}
				else
				{
					PlayersTurn = "Bottom";
					GrabH2.InnerHTML = "Bottom Player Goes First";
				}
				var ChangeTurnInHTML = document.getElementById("WhosTurn");
				ChangeTurnInHTML.textContent = "Players Turn: " + PlayersTurn;
			}
				
			function MakeBored()
			{
				var ThisIsANumber = 0;
				var MancalaTable = document.createElement("table");
				MancalaTable.id = "MancalaTable";
				
				var body = document.body;
				body.appendChild(MancalaTable);
				
				for (i = 0; i != 2; i++) {
					var NewTR = document.createElement("TR");
					MancalaTable.appendChild(NewTR);
					for (C = 0; C != 8; C++)
					{
						ThisIsANumber += 1;
						if ((i == 0) && (C == 0 || C == 7))
						{
							var NewTD = document.createElement("TD");
							NewTD.rowSpan = 2;
							NewTD.id = "IDNumber" + ThisIsANumber;
							NewTD.addEventListener("click", function() {OnClick(this.id)});
							NewTD.textContent = 0;
							NewTR.appendChild(NewTD);
						} else if ((i == 1) && (C == 0 || C == 7))
						{
							//Do NOTHING!!!
						} else
						{
							var NewTD = document.createElement("TD");
							NewTD.textContent = Math.round(Math.random() * 4 + 1);
							NewTD.id = "IDNumber" + ThisIsANumber;
							NewTD.addEventListener("click", function() {OnClick(this.id)});
							NewTR.appendChild(NewTD);
						}
					}
				}
			}
				
			function OnClick(MrID) {
				var NumbersOnID = CheckNumbers(MrID);
				var IDGiven = document.getElementById(MrID);
				var ChangeTurnInHTML = document.getElementById("WhosTurn");
				if(MrID != "IDNumber1" && MrID != "IDNumber8")
				{
					if (PlayersTurn == "Top" && TopArray.indexOf(MrID) <= 5) { // <-- \\
						IDGiven.textContent = "0";
						var IDInArray = TopArray.indexOf(MrID);
						for(C = 1; C <= NumbersOnID; C++)
						{
							var NextID = document.getElementById(TopArray[IDInArray + C]);
							var OldValue = Number(NextID.textContent);
							NextID.textContent =  OldValue + 1;
						}
						
						if(TopArray[IDInArray + NumbersOnID] == "IDNumber1")
						{
							ChangeTurnInHTML.textContent = "Players Turn: " + PlayersTurn + ", AGAIN!";
						}
						else
						{
							PlayersTurn = "Bottom";
							ChangeTurnInHTML.textContent = "Players Turn: " + PlayersTurn;
						}
						
					} else if (PlayersTurn == "Bottom" && BottomArray.indexOf(MrID) <= 5) { // --> \\
						IDGiven.textContent = "0";
						var IDInArray = BottomArray.indexOf(MrID);
						for(C = 1; C <= NumbersOnID; C++)
						{
							var NextID = document.getElementById(BottomArray[IDInArray + C]);
							var OldValue = Number(NextID.textContent);
							NextID.textContent =  OldValue + 1;
						}
						
						if(BottomArray[IDInArray + NumbersOnID] == "IDNumber8")
						{
							ChangeTurnInHTML.textContent = "Players Turn: " + PlayersTurn + ", AGAIN!";
						}
						else
						{
							PlayersTurn = "Top";
							ChangeTurnInHTML.textContent = "Players Turn: " + PlayersTurn;
						}
					}
				}
			}
				
			function CheckCapture(){
			
			}
			
			function CheckIfWon(){
			
			}
				
			function CheckNumbers(MrID) {
				var IDNumber = document.getElementById(MrID);
				return IDNumber.textContent;
			}
		</Script>
	</Head>
	<Body onload="buildMap('MenuBar'); MakeBored(); RandomPersonFirst();">
		<div id="MenuBar"></div>
		<Center>
			<H1>Mancala!</H1>
		</Center>
		<H2 id = "WhosTurn"></H2>
	</Body>
</HTML>
